<!DOCTYPE html>
<html>
<head>    <title>Para Bri 💙 | Mi Spark Eterno</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@400;600&display=swap" rel="stylesheet"><style>
        :root {
            --main-color: #4fc3f7;
            --secondary-color: #ff4081;
            --accent-color: #7c4dff;
            --text-color: #ffffff;
            --text-secondary: #b3e5fc;
            --bg-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            --card-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.18);
        }

        * {
            box-sizing: border-box;
        }        body {
            background: var(--bg-gradient);
            /* Eliminamos background-attachment: fixed para iOS */
            font-family: 'Montserrat', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
            overflow-x: hidden;
            margin: 0;
            padding: 20px;
            touch-action: manipulation;
            position: relative;
        }

        /* Fondo fijo específico para iOS/WebKit */
        html {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            background-attachment: fixed;
            min-height: 100%;
        }

        /* Fallback para dispositivos iOS */
        @supports (-webkit-touch-callout: none) {
            html {
                background-attachment: scroll;
            }
            
            body {
                background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
                background-size: 100% 100vh;
                background-repeat: no-repeat;
            }
        }

        /* Fondo animado con partículas */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(79, 195, 247, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 64, 129, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(124, 77, 255, 0.1) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes float {
            0%, 100% { 
                transform: translate(0px, 0px) rotate(0deg); 
                opacity: 0.8;
            }
            33% { 
                transform: translate(30px, -30px) rotate(120deg); 
                opacity: 1;
            }
            66% { 
                transform: translate(-20px, 20px) rotate(240deg); 
                opacity: 0.9;
            }
        }        /* Contenedor principal mejorado para iOS */
        .love-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(79, 195, 247, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            overflow: hidden;
            padding: 35px;
            border: 1px solid var(--glass-border);
            z-index: 2;
            transform: translateY(0);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: containerEntry 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Fallback para iOS cuando backdrop-filter no funciona */
        @supports not (backdrop-filter: blur(20px)) {
            .love-container {
                background: rgba(15, 15, 35, 0.85);
                border: 2px solid rgba(255, 255, 255, 0.15);
            }
        }

        /* Arreglo específico para iOS/Safari */
        @supports (-webkit-touch-callout: none) {
            .love-container {
                background: rgba(15, 15, 35, 0.9);
                border: 2px solid rgba(255, 255, 255, 0.2);
            }
        }

        @keyframes containerEntry {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                filter: blur(5px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        .love-container:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(79, 195, 247, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        /* Efecto de borde brillante mejorado */
        .love-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent,
                rgba(79, 195, 247, 0.1),
                rgba(255, 64, 129, 0.1),
                rgba(124, 77, 255, 0.1),
                transparent);
            border-radius: 24px;
            padding: 2px;
            z-index: -1;
            animation: borderFlow 8s linear infinite;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .love-container:hover::before {
            opacity: 1;
        }

        @keyframes borderFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }        /* Sección de la carta mejorada */
        .card-section {
            text-align: center;
            margin-bottom: 35px;
            position: relative;
        }

        .card-title {
            font-family: 'Pacifico', cursive;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-shadow: 0 4px 8px rgba(255, 64, 129, 0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% {
                filter: brightness(1) drop-shadow(0 0 10px rgba(255, 64, 129, 0.3));
            }
            100% {
                filter: brightness(1.2) drop-shadow(0 0 20px rgba(124, 77, 255, 0.4));
            }
        }        .card-button {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Pacifico', cursive;
            box-shadow: 
                0 8px 20px rgba(255, 64, 129, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            touch-action: manipulation; /* Mejora la respuesta táctil */
            -webkit-tap-highlight-color: transparent; /* Elimina highlight en móviles */
            user-select: none; /* Previene selección de texto */
            -webkit-user-select: none; /* Safari */
        }

        .card-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .card-button:hover::before {
            left: 100%;
        }

        .card-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 
                0 12px 30px rgba(255, 64, 129, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.2);
        }

        .card-button:active {
            transform: translateY(0) scale(0.98);
        }        /* Estilos mejorados para la carta */
        .card {
            position: relative;
            width: 100%;
            max-width: 340px;
            height: 220px;
            margin: 25px auto;
            perspective: 1000px;
            display: none;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.flip .card-inner {
            transform: rotateY(180deg);
        }        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 25px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* Arreglo específico para iOS */
        @supports (-webkit-touch-callout: none) {
            .card-front, .card-back {
                backdrop-filter: none;
                -webkit-backdrop-filter: none;
            }
        }

        .card-front {
            background: linear-gradient(135deg, 
                rgba(255, 154, 158, 0.9) 0%, 
                rgba(250, 208, 196, 0.9) 100%);
            color: #4a148c;
            font-family: 'Pacifico', cursive;
            font-size: 1.3rem;
            text-align: center;
            line-height: 1.4;
            text-shadow: 0 2px 4px rgba(255, 255, 255, 0.3);
        }

        .card-back {
            background: linear-gradient(135deg, 
                rgba(161, 196, 253, 0.9) 0%, 
                rgba(194, 233, 251, 0.9) 100%);
            color: #1a237e;
            transform: rotateY(180deg);
            font-family: 'Pacifico', cursive;
            font-size: 1.2rem;
            text-align: center;
        }        /* Corazón mejorado con animaciones */
        .heart-container {
            display: none;
            text-align: center;
            margin: 25px 0;
            position: relative;
        }

        /* Indicaciones visuales para el corazón */
        .heart-hint {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 10;
            animation: hintBounce 2s ease-in-out infinite;
        }

        .tap-indicator {
            color: var(--main-color);
            font-size: 1.1rem;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
            margin-bottom: 5px;
        }

        .magic-hint {
            color: var(--secondary-color);
            font-size: 0.9rem;
            font-style: italic;
            text-shadow: 0 0 8px rgba(255, 64, 129, 0.4);
        }

        @keyframes hintBounce {
            0%, 100% { 
                transform: translateX(-50%) translateY(0px);
                opacity: 0.8;
            }
            50% { 
                transform: translateX(-50%) translateY(-10px);
                opacity: 1;
            }
        }

        /* Contador visual */
        .countdown-container {
            display: none;
            text-align: center;
            margin-top: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease-out;
        }

        .countdown-container.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .countdown-text {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 15px;
            font-style: italic;
        }

        .countdown-timer {
            font-size: 3rem;
            font-weight: bold;
            color: var(--main-color);
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.6);
            animation: countdownPulse 1s ease-in-out infinite;
        }

        @keyframes countdownPulse {
            0%, 100% { 
                transform: scale(1);
                filter: brightness(1);
            }
            50% { 
                transform: scale(1.1);
                filter: brightness(1.3);
            }
        }

        .countdown-progress {
            width: 80px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            margin: 15px auto 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--main-color), var(--secondary-color));
            border-radius: 2px;
            width: 0%;
            transition: width 1s linear;
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }        .heart {
            font-size: 5rem;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
            display: inline-block;
            animation: heartBeat 1.5s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 64, 129, 0.5));
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            touch-action: manipulation; /* Mejora la respuesta táctil */
            -webkit-tap-highlight-color: transparent; /* Elimina highlight en móviles */
            user-select: none; /* Previene selección de texto */
            -webkit-user-select: none; /* Safari */
        }

        .heart::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120%;
            height: 120%;
            background: radial-gradient(circle, rgba(255, 64, 129, 0.2) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: -1;
            animation: heartPulse 2s ease-in-out infinite;
        }

        @keyframes heartBeat {
            0%, 100% { 
                transform: scale(1); 
                filter: drop-shadow(0 0 20px rgba(255, 64, 129, 0.5));
            }
            50% { 
                transform: scale(1.15); 
                filter: drop-shadow(0 0 30px rgba(255, 64, 129, 0.8));
            }
        }

        @keyframes heartPulse {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.3;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.1;
            }
        }

        .heart:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 40px rgba(255, 64, 129, 1));
        }

        .final-message {
            font-family: 'Pacifico', cursive;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.4rem;
            margin-top: 20px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            animation: messageAppear 1s ease-out forwards;
            text-align: center;
            line-height: 1.5;
        }

        .final-message.show {
            display: block;
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }        /* Sección Spark mejorada con compatibilidad iOS */
        .spark-section {
            text-align: center;
            margin: 40px 0;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1.2s 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            position: relative;
        }

        .spark-section::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--main-color), transparent);
            transform: translateX(-50%);
            animation: lineExpand 2s ease-out 1.5s;
        }

        @keyframes lineExpand {
            0% { width: 0; }
            100% { width: 60px; }
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .spark-title {
            font-family: 'Pacifico', cursive;
            background: linear-gradient(135deg, var(--main-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.4);
            animation: sparkGlow 4s ease-in-out infinite alternate;
        }

        @keyframes sparkGlow {
            0% {
                filter: brightness(1) drop-shadow(0 0 15px rgba(79, 195, 247, 0.4));
            }
            100% {
                filter: brightness(1.3) drop-shadow(0 0 25px rgba(124, 77, 255, 0.6));
            }
        }

        .spark-subtitle {
            font-style: italic;
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .spark-message {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 18px;
            padding: 20px;
            border-left: 4px solid var(--main-color);
            border: 1px solid var(--glass-border);
            margin: 25px 0;
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            font-size: 1.05rem;
            line-height: 1.6;
            position: relative;
            overflow: hidden;
        }

        .spark-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(79, 195, 247, 0.05) 50%, transparent 70%);
            transform: translateX(-100%);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
            100% { transform: translateX(100%); }
        }

        /* Arreglo específico para iOS */
        @supports (-webkit-touch-callout: none) {
            .spark-message {
                background: rgba(15, 15, 35, 0.8);
                backdrop-filter: none;
                -webkit-backdrop-filter: none;
                border: 2px solid rgba(79, 195, 247, 0.3);
            }
        }/* Controles de música mejorados */
        .music-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 35px;
            position: relative;
        }        .music-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                rgba(79, 195, 247, 0.2) 0%, 
                rgba(124, 77, 255, 0.2) 100%);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 10px 25px rgba(79, 195, 247, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
            touch-action: manipulation; /* Mejora la respuesta táctil */
            -webkit-tap-highlight-color: transparent; /* Elimina highlight en móviles */
            user-select: none; /* Previene selección de texto */
            -webkit-user-select: none; /* Safari */
        }

        /* Arreglo específico para iOS */
        @supports (-webkit-touch-callout: none) {
            .music-btn {
                background: rgba(79, 195, 247, 0.3);
                backdrop-filter: none;
                -webkit-backdrop-filter: none;
            }
        }

        .music-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(79, 195, 247, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: scale(0);
            transition: transform 0.3s ease-out;
        }

        .music-btn:hover::before {
            transform: scale(1);
        }

        .music-btn:hover {
            background: linear-gradient(135deg, 
                rgba(79, 195, 247, 0.4) 0%, 
                rgba(124, 77, 255, 0.4) 100%);
            transform: scale(1.1) translateY(-2px);
            box-shadow: 
                0 15px 35px rgba(79, 195, 247, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .music-btn:active {
            transform: scale(1.05) translateY(0);
        }

        .music-text {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 15px;
            font-weight: 500;
            text-align: center;
        }

        .tap-hint {
            font-size: 0.85rem;
            color: var(--main-color);
            opacity: 0.8;
            margin-top: 12px;
            text-align: center;
            animation: pulseGlow 2.5s ease-in-out infinite;
            background: rgba(79, 195, 247, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(79, 195, 247, 0.2);
        }

        @keyframes pulseGlow {
            0%, 100% { 
                opacity: 0.8; 
                box-shadow: 0 0 10px rgba(79, 195, 247, 0.2);
            }
            50% { 
                opacity: 1; 
                box-shadow: 0 0 20px rgba(79, 195, 247, 0.4);
            }
        }        /* Efectos de chispas mejorados */
        .sparks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .spark {
            position: absolute;
            width: calc(4px + 3vw * var(--size));
            height: calc(4px + 3vw * var(--size));
            background: var(--color, #4fc3f7);
            border-radius: 50%;
            animation: sparkleEnhanced 3s infinite;
            opacity: 0;
            filter: blur(0.5px);
            box-shadow: 0 0 10px var(--color, #4fc3f7);
        }

        @keyframes sparkleEnhanced {
            0%, 100% { 
                opacity: 0; 
                transform: scale(0.3) rotate(0deg); 
                filter: blur(2px);
            }
            25% { 
                opacity: 0.8; 
                transform: scale(1) rotate(90deg); 
                filter: blur(0px);
                box-shadow: 0 0 15px var(--color, #4fc3f7);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.4) rotate(180deg); 
                filter: blur(0px);
                box-shadow: 0 0 20px var(--color, #4fc3f7);
            }
            75% { 
                opacity: 0.6; 
                transform: scale(0.8) rotate(270deg); 
                filter: blur(1px);
                box-shadow: 0 0 10px var(--color, #4fc3f7);
            }
        }        /* Mejoras adicionales para móviles - interactividad táctil */
        button, .card-button, .heart, .music-btn, .future-btn, .close-infinite {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }
        
        /* Estados activos mejorados para móviles */
        .card-button:active, .heart:active, .music-btn:active, .future-btn:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
        
        /* Prevenir doble-tap zoom en iOS */
        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Permitir selección de texto solo donde es necesario */
        p, span, div.spark-message {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        /* Responsive mejorado con arreglos iOS */
        @media (max-width: 600px) {
            .love-container {
                padding: 25px;
                max-width: 95%;
            }
            
            .card-title {
                font-size: 1.8rem;
            }
            
            .spark-title {
                font-size: 1.6rem;
            }
            
            .card {
                height: 200px;
                max-width: 300px;
            }
            
            .heart {
                font-size: 4rem;
            }
            
            .music-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .spark {
                width: calc(3px + 2vw * var(--size));
                height: calc(3px + 2vw * var(--size));
            }
        }        /* Arreglos específicos para iOS y dispositivos móviles */
        @supports (-webkit-touch-callout: none) {
            /* Asegurar que no hay zoom en iOS */
            input, button, select, textarea {
                font-size: 16px;
            }
            
            /* Prevenir rebote en iOS */
            body {
                -webkit-overflow-scrolling: touch;
            }
        }

        /* Arreglos específicos para Android Chrome */
        @media screen and (min-width: 320px) and (max-width: 768px) {
            /* Asegurar que el fondo funcione en Android */
            body {
                background-attachment: scroll;
                background-size: 100% 100vh;
                background-repeat: no-repeat;
            }
            
            /* Mejorar rendimiento en Android */
            .love-container {
                will-change: transform;
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
            }
            
            /* Asegurar que los botones funcionen en Android */
            .card-button, .music-btn, .future-btn {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
        }

        /* Arreglos específicos para navegadores móviles */
        @media (hover: none) and (pointer: coarse) {
            /* Dispositivos táctiles (Android e iOS) */
            .love-container:hover {
                transform: translateY(0);
            }
            
            .card-button:hover {
                transform: none;
            }
            
            .music-btn:hover {
                transform: none;
            }
            
            /* Mejorar interacción táctil */
            .heart {
                -webkit-tap-highlight-color: transparent;
                user-select: none;
                -webkit-user-select: none;
            }
        }

        /* Arreglos adicionales para WebKit */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            .love-container {
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
            }
        }

        /* Soporte para Android Stock Browser (versiones antiguas) */
        @media screen and (-webkit-device-pixel-ratio: 1) {
            .spark-message, .future-section, .infinite-content {
                background: rgba(15, 15, 35, 0.85);
                border: 2px solid rgba(79, 195, 247, 0.3);
            }
        }

        /* Animaciones adicionales para entrada */
        @keyframes slideInFromLeft {
            0% {
                transform: translateX(-100px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromRight {
            0% {
                transform: translateX(100px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Mejora del scroll suave */
        html {
            scroll-behavior: smooth;
        }        /* Efectos adicionales de interacción */
        .love-container *:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 195, 247, 0.3);
        }        /* --- ESTILOS PARA "NUESTRO FUTURO" CON COMPATIBILIDAD iOS --- */
        .future-section {
            opacity: 0;
            transform: translateY(50px) scale(0.9);
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
            margin-top: 30px;
            position: relative;
            background: linear-gradient(135deg, 
                rgba(124, 77, 255, 0.1) 0%, 
                rgba(79, 195, 247, 0.1) 50%, 
                rgba(255, 64, 129, 0.1) 100%);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        /* Arreglo específico para iOS en future section */
        @supports (-webkit-touch-callout: none) {
            .future-section {
                background: rgba(15, 15, 35, 0.85);
                backdrop-filter: none;
                border: 2px solid rgba(79, 195, 247, 0.3);
            }
        }

        .future-section.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .future-stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            animation: starTwinkle 3s ease-in-out infinite;
            filter: drop-shadow(0 0 5px currentColor);
        }

        @keyframes starTwinkle {
            0%, 100% { 
                opacity: 0.3; 
                transform: scale(0.8) rotate(0deg); 
            }
            50% { 
                opacity: 1; 
                transform: scale(1.2) rotate(180deg); 
            }
        }

        .future-title {
            font-family: 'Pacifico', cursive;
            font-size: 2.2rem;
            text-align: center;
            background: linear-gradient(135deg, 
                var(--accent-color), 
                var(--main-color), 
                var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            text-shadow: 0 0 30px rgba(124, 77, 255, 0.5);
            animation: titleFloat 4s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .future-content {
            position: relative;
            z-index: 2;
        }

        .future-message {
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .future-message p {
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: var(--text-color);
            opacity: 0;
            animation: textReveal 1s ease-out forwards;
        }

        .future-message p:nth-child(1) { animation-delay: 0.5s; }
        .future-message p:nth-child(2) { animation-delay: 1s; }

        @keyframes textReveal {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .future-dreams {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 25px 0;
            animation: dreamsAppear 1s ease-out 1.5s both;
        }

        .dream-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 12px 8px;
            border-radius: 15px;
            text-align: center;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            animation: dreamPulse 2s ease-in-out infinite;
        }

        .dream-item:nth-child(1) { animation-delay: 0s; }
        .dream-item:nth-child(2) { animation-delay: 0.5s; }
        .dream-item:nth-child(3) { animation-delay: 1s; }
        .dream-item:nth-child(4) { animation-delay: 1.5s; }

        @keyframes dreamPulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 0 10px rgba(79, 195, 247, 0.2);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 0 20px rgba(79, 195, 247, 0.4);
            }
        }

        @keyframes dreamsAppear {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .future-promise {
            font-family: 'Pacifico', cursive;
            font-size: 1.3rem;
            color: var(--secondary-color);
            text-align: center;
            margin-top: 20px;
            animation: promiseGlow 3s ease-in-out infinite alternate;
        }

        @keyframes promiseGlow {
            0% {
                text-shadow: 0 0 10px rgba(255, 64, 129, 0.5);
            }
            100% {
                text-shadow: 0 0 25px rgba(255, 64, 129, 0.8);
            }
        }

        .future-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }        .future-btn {
            background: linear-gradient(135deg, 
                rgba(79, 195, 247, 0.8) 0%, 
                rgba(124, 77, 255, 0.8) 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 5px 15px rgba(79, 195, 247, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            touch-action: manipulation; /* Mejora la respuesta táctil */
            -webkit-tap-highlight-color: transparent; /* Elimina highlight en móviles */
            user-select: none; /* Previene selección de texto */
            -webkit-user-select: none; /* Safari */
        }

        .future-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .future-btn:hover::before {
            left: 100%;
        }

        .future-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 8px 25px rgba(79, 195, 247, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .restart-btn {
            background: linear-gradient(135deg, 
                rgba(255, 64, 129, 0.8) 0%, 
                rgba(124, 77, 255, 0.8) 100%);
        }

        /* --- ESTILOS PARA MENSAJE INFINITO --- */
        .infinite-love {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .infinite-love.show {
            opacity: 1;
        }        .infinite-content {
            background: linear-gradient(135deg, 
                rgba(124, 77, 255, 0.2) 0%, 
                rgba(79, 195, 247, 0.2) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 400px;
            animation: infiniteFloat 4s ease-in-out infinite;
        }

        /* Arreglo específico para iOS en infinite content */
        @supports (-webkit-touch-callout: none) {
            .infinite-content {
                background: rgba(15, 15, 35, 0.9);
                backdrop-filter: none;
                border: 2px solid rgba(79, 195, 247, 0.4);
            }
        }

        @keyframes infiniteFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-20px) scale(1.02); }
        }

        .infinity-symbol {
            font-size: 4rem;
            color: var(--main-color);
            margin-bottom: 20px;
            animation: infiniteRotate 6s linear infinite;
            text-shadow: 0 0 30px rgba(79, 195, 247, 0.8);
        }

        @keyframes infiniteRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .floating-hearts {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .floating-hearts span {
            font-size: 1.5rem;
            animation: heartFloat 3s ease-in-out infinite;
        }

        .floating-hearts span:nth-child(1) { animation-delay: 0s; }
        .floating-hearts span:nth-child(2) { animation-delay: 0.6s; }
        .floating-hearts span:nth-child(3) { animation-delay: 1.2s; }
        .floating-hearts span:nth-child(4) { animation-delay: 1.8s; }
        .floating-hearts span:nth-child(5) { animation-delay: 2.4s; }

        @keyframes heartFloat {
            0%, 100% { 
                transform: translateY(0px) scale(1); 
                opacity: 0.7;
            }
            50% { 
                transform: translateY(-15px) scale(1.2); 
                opacity: 1;
            }
        }        .close-infinite {
            background: rgba(255, 64, 129, 0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            touch-action: manipulation; /* Mejora la respuesta táctil */
            -webkit-tap-highlight-color: transparent; /* Elimina highlight en móviles */
            user-select: none; /* Previene selección de texto */
            -webkit-user-select: none; /* Safari */
        }

        .close-infinite:hover {
            background: rgba(255, 64, 129, 1);
            transform: scale(1.05);
        }

        /* Responsive para la nueva sección */
        @media (max-width: 600px) {
            .future-title {
                font-size: 1.8rem;
            }
            
            .future-dreams {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .future-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .infinite-content {
                max-width: 90%;
                padding: 30px 20px;
            }
            
            .infinity-symbol {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <!-- Contenedor principal unificado -->
    <div class="love-container">
        <!-- Sección de la carta interactiva -->
        <div class="card-section">
            <h2 class="card-title">Hola mi amor 💌</h2>
            <button class="card-button" id="open-card-btn">Abrir carta</button>
            
            <div class="card" id="card">
                <div class="card-inner">
                    <div class="card-front">
                        Desde que llegaste a mi vida, todo tiene más color... ❤️
                    </div>
                    <div class="card-back">
                        <button class="card-button" id="open-heart-btn">Abrir corazón</button>
                    </div>
                </div>
            </div>
              <div class="heart-container" id="heart-container">
                <div class="heart-hint" id="heart-hint">
                    <div class="tap-indicator">👆 Toca el corazón</div>
                    <div class="magic-hint">✨ Algo mágico te espera ✨</div>
                </div>
                <div class="heart" id="heart">❤️</div>
                <div class="countdown-container" id="countdown-container">
                    <div class="countdown-text">Preparando algo especial...</div>
                    <div class="countdown-timer" id="countdown-timer">3</div>
                    <div class="countdown-progress">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                </div>
                <p class="final-message" id="final-message">
                    Eres lo mejor que me ha pasado. Te amo con todo mi corazón 😘
                </p>
            </div>
        </div>
        
        <!-- Sección del mensaje Spark -->
        <div class="spark-section">
            <h2 class="spark-title">Para Bri, mi Spark 💙</h2>
            <p class="spark-subtitle">«Porque iluminas mi vida como esta canción...»</p>
            
            <div class="spark-message">
                «Briggitte Paola: Eres esa chispa que enciende mi corazón cada día. 
                Como dice Coldplay, eres mi 'Spark' eterno.»
            </div>
        </div>
        
        <!-- Controles de música -->
        <div class="music-controls">
            <button class="music-btn" id="music-btn">▶️</button>
            <div class="music-text" id="music-text">Spark - Coldplay</div>
            <div class="tap-hint" id="tap-hint">Toca la pantalla para activar el audio</div>
        </div>
    </div>
    
    <!-- Efectos de chispas -->
    <div class="sparks" id="sparks"></div>
    
    <!-- Audio -->
    <audio id="coldplay-audio" loop>
        <source src="Coldplay - Sparks.mp3" type="audio/mp3">
    </audio>
    
    <script>
        // Elementos de la carta interactiva
        const openCardBtn = document.getElementById('open-card-btn');
        const card = document.getElementById('card');
        const openHeartBtn = document.getElementById('open-heart-btn');
        const heartContainer = document.getElementById('heart-container');
        const heart = document.getElementById('heart');
        const finalMessage = document.getElementById('final-message');
        
        // Elementos de música
        const musicBtn = document.getElementById('music-btn');
        const musicText = document.getElementById('music-text');
        const tapHint = document.getElementById('tap-hint');
        const audio = document.getElementById('coldplay-audio');
          // Mostrar carta - Eventos mejorados para móviles
        function openCard() {
            openCardBtn.style.display = 'none';
            card.style.display = 'block';
            setTimeout(() => {
                card.classList.add('flip');
            }, 500);
        }
        
        openCardBtn.addEventListener('click', openCard);
        openCardBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            openCard();
        });          // Mostrar corazón - Eventos mejorados para móviles
        function openHeart() {
            card.style.display = 'none';
            heartContainer.style.display = 'block';
            
            // Mostrar la indicación para tocar el corazón
            const heartHint = document.getElementById('heart-hint');
            heartHint.style.display = 'block';
        }
        
        openHeartBtn.addEventListener('click', openHeart);
        openHeartBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            openHeart();
        });

        // Variables para el contador
        const countdownContainer = document.getElementById('countdown-container');
        const countdownTimer = document.getElementById('countdown-timer');
        const progressBar = document.getElementById('progress-bar');
        let countdownInterval;        // Mostrar mensaje final al tocar el corazón con contador - Eventos mejorados para móviles
        function activateHeart() {
            // Ocultar la indicación
            const heartHint = document.getElementById('heart-hint');
            heartHint.style.display = 'none';
            
            // Mostrar mensaje inmediatamente
            finalMessage.style.display = 'block';
            finalMessage.classList.add('show');
            
            // Mostrar contador
            countdownContainer.classList.add('show');
            
            // Efecto de chispas especial al tocar el corazón
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const rect = heart.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    launchSparks(centerX, centerY);
                }, i * 100);
            }
            
            // Iniciar contador de 3 segundos
            let timeLeft = 3;
            countdownTimer.textContent = timeLeft;
            progressBar.style.width = '0%';
            
            countdownInterval = setInterval(() => {
                timeLeft--;
                if (timeLeft > 0) {
                    countdownTimer.textContent = timeLeft;
                    progressBar.style.width = ((3 - timeLeft) / 3 * 100) + '%';
                } else {
                    clearInterval(countdownInterval);
                    countdownTimer.textContent = '¡Listo!';
                    progressBar.style.width = '100%';
                    
                    // Mostrar la sección "Nuestro Futuro" después del contador
                    setTimeout(() => {
                        showFutureSection();
                    }, 500);
                }
            }, 1000);
        }
        
        heart.addEventListener('click', activateHeart);
        heart.addEventListener('touchend', (e) => {
            e.preventDefault();
            activateHeart();
        });
          // Configuración de audio mejorada para móviles
        let userInteracted = false;
        let isAndroid = /Android/i.test(navigator.userAgent);
        let isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        let isMobile = isAndroid || isIOS;
        
        audio.volume = 0;
        audio.preload = "auto";
        audio.load();
        
        let audioLoaded = false;
        audio.addEventListener('canplaythrough', () => {
            audioLoaded = true;
            musicText.textContent = 'Spark - Coldplay';
        });
        
        audio.addEventListener('error', () => {
            audioLoaded = false;
            musicText.textContent = 'Audio no disponible';
        });
        
        // Función mejorada para dispositivos móviles
        function enableAudio() {
            if (!userInteracted) {
                userInteracted = true;
                audio.volume = isMobile ? 0.7 : 0.5; // Volumen más alto en móviles
                tapHint.style.display = 'none';
                
                // Para Android Chrome, intentar reproducir silenciosamente
                if (isAndroid) {
                    audio.muted = true;
                    audio.play().then(() => {
                        audio.muted = false;
                        audio.pause();
                        audio.currentTime = 0;
                    }).catch(() => {
                        console.log('Audio autoplay blocked');
                    });
                }
            }
        }
        
        // Eventos de interacción mejorados para móviles
        document.body.addEventListener('click', enableAudio);
        document.body.addEventListener('touchstart', enableAudio, { passive: true });
        document.body.addEventListener('touchend', enableAudio, { passive: true });
          // Control de música - Eventos mejorados para móviles
        async function toggleMusic() {
            try {
                if (!audioLoaded) return;
                
                if (audio.paused) {
                    await audio.play();
                    musicBtn.textContent = '⏸';
                    musicText.textContent = 'Reproduciendo...';
                } else {
                    audio.pause();
                    musicBtn.textContent = '▶️';
                    musicText.textContent = 'Spark - Coldplay';
                }
            } catch (error) {
                tapHint.style.display = 'block';
            }
        }
        
        musicBtn.addEventListener('click', toggleMusic);
        musicBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            toggleMusic();
        });// Crear chispas mejoradas con más variedad
        function createSparks() {
            for (let i = 0; i < 40; i++) {
                const spark = document.createElement('div');
                spark.className = 'spark';
                const size = Math.random() * 0.8 + 0.2; // Tamaños más variados
                const colors = [
                    '#4fc3f7', '#80d8ff', '#b388ff', '#fff176', 
                    '#ff8a65', '#ff4081', '#7c4dff', '#69f0ae',
                    '#ffab40', '#f06292'
                ];
                spark.style.setProperty('--size', size.toFixed(2));
                spark.style.setProperty('--color', colors[Math.floor(Math.random() * colors.length)]);
                spark.style.left = Math.random() * 100 + 'vw';
                spark.style.top = Math.random() * 100 + 'vh';
                spark.style.animationDelay = Math.random() * 3 + 's';
                spark.style.animationDuration = (Math.random() * 2 + 2) + 's'; // Duraciones variables
                document.getElementById('sparks').appendChild(spark);
            }
        }
        
        // Chispas al interactuar mejoradas
        function launchSparks(x, y) {
            for (let i = 0; i < 12; i++) {
                const spark = document.createElement('div');
                spark.className = 'spark';
                const size = Math.random() * 0.6 + 0.4;
                const colors = [
                    '#4fc3f7', '#80d8ff', '#b388ff', '#fff176', 
                    '#ff8a65', '#ff4081', '#7c4dff', '#69f0ae'
                ];
                spark.style.setProperty('--size', size.toFixed(2));
                spark.style.setProperty('--color', colors[Math.floor(Math.random() * colors.length)]);
                
                // Distribución más natural en círculo
                const angle = (i / 12) * Math.PI * 2;
                const distance = 50 + Math.random() * 50;
                const offsetX = Math.cos(angle) * distance;
                const offsetY = Math.sin(angle) * distance;
                
                spark.style.left = `calc(${x}px + ${offsetX}px)`;
                spark.style.top = `calc(${y}px + ${offsetY}px)`;
                spark.style.animationDelay = Math.random() * 0.3 + 's';
                spark.style.animationDuration = '2s';
                document.getElementById('sparks').appendChild(spark);
                
                setTimeout(() => spark.remove(), 3000);
            }
        }

        // --- NUEVA SECCIÓN: NUESTRO FUTURO ---
        function showFutureSection() {
            // Ocultar el corazón y crear la nueva sección
            heartContainer.style.display = 'none';
            
            // Crear la sección "Nuestro Futuro"
            const futureSection = document.createElement('div');
            futureSection.className = 'future-section';
            futureSection.innerHTML = `
                <div class="future-stars"></div>
                <h2 class="future-title">Nuestro Futuro ✨</h2>
                <div class="future-content">
                    <div class="future-message">
                        <p>Juntos escribiremos una historia llena de aventuras, risas y amor infinito.</p>
                        <p>Cada día contigo será una nueva página de nuestro cuento de hadas. 📖💕</p>
                        <div class="future-dreams">
                            <span class="dream-item">🏠 Nuestro hogar</span>
                            <span class="dream-item">🌍 Viajes increíbles</span>
                            <span class="dream-item">👶 Pequeños milagros</span>
                            <span class="dream-item">💍 Promesas eternas</span>
                        </div>
                        <p class="future-promise">
                            <strong>Prometo amarte cada día más que el anterior, Bri 💙</strong>
                        </p>
                    </div>
                    <div class="future-actions">
                        <button class="future-btn restart-btn" onclick="restartJourney()">
                            🔄 Revivir nuestro momento
                        </button>
                        <button class="future-btn infinite-btn" onclick="showInfiniteMessage()">
                            ♾️ Amor infinito
                        </button>
                    </div>
                </div>
            `;
            
            // Insertar después de la card-section
            const cardSection = document.querySelector('.card-section');
            cardSection.appendChild(futureSection);
            
            // Animación de entrada
            setTimeout(() => {
                futureSection.classList.add('show');
            }, 100);
            
            // Crear estrellas animadas
            createStars();
        }

        function createStars() {
            const starsContainer = document.querySelector('.future-stars');
            for (let i = 0; i < 20; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = '⭐';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.fontSize = (Math.random() * 0.5 + 0.8) + 'rem';
                starsContainer.appendChild(star);
            }
        }        function restartJourney() {
            // Remover la sección del futuro
            const futureSection = document.querySelector('.future-section');
            if (futureSection) {
                futureSection.remove();
            }
            
            // Resetear todo al estado inicial
            openCardBtn.style.display = 'inline-block';
            card.style.display = 'none';
            card.classList.remove('flip');
            heartContainer.style.display = 'none';
            finalMessage.style.display = 'none';
            finalMessage.classList.remove('show');
            
            // Resetear indicaciones y contador
            const heartHint = document.getElementById('heart-hint');
            if (heartHint) heartHint.style.display = 'none';
            countdownContainer.classList.remove('show');
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            // Scroll suave al inicio
            document.querySelector('.love-container').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
            
            // Efecto de chispas de reinicio
            setTimeout(() => {
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        launchSparks(
                            Math.random() * window.innerWidth, 
                            Math.random() * window.innerHeight
                        );
                    }, i * 100);
                }
            }, 500);
        }

        function showInfiniteMessage() {
            // Crear mensaje infinito
            const infiniteDiv = document.createElement('div');
            infiniteDiv.className = 'infinite-love';
            infiniteDiv.innerHTML = `
                <div class="infinite-content">
                    <div class="infinity-symbol">∞</div>
                    <p>Mi amor por ti no tiene límites, Bri</p>
                    <p>Como las estrellas en el cielo, es eterno e infinito</p>
                    <div class="floating-hearts">
                        <span>💙</span><span>💜</span><span>🤍</span><span>💖</span><span>💙</span>
                    </div>
                    <button class="close-infinite" onclick="closeInfinite()">Cerrar</button>
                </div>
            `;
            
            document.body.appendChild(infiniteDiv);
            
            setTimeout(() => {
                infiniteDiv.classList.add('show');
            }, 100);
        }

        function closeInfinite() {
            const infiniteDiv = document.querySelector('.infinite-love');
            if (infiniteDiv) {
                infiniteDiv.classList.remove('show');
                setTimeout(() => infiniteDiv.remove(), 500);
            }
        }
          // Inicializar con efectos mejorados
        window.addEventListener('load', () => {
            createSparks();
            
            // Animación de entrada del contenedor
            setTimeout(() => {
                document.querySelector('.love-container').style.opacity = '1';
            }, 100);            // Efectos de interacción mejorados para móviles
            document.body.addEventListener('click', (e) => {
                launchSparks(e.clientX, e.clientY);
                
                // Efecto de ondas al hacer clic
                const ripple = document.createElement('div');
                ripple.style.position = 'fixed';
                ripple.style.left = e.clientX + 'px';
                ripple.style.top = e.clientY + 'px';
                ripple.style.width = '10px';
                ripple.style.height = '10px';
                ripple.style.borderRadius = '50%';
                ripple.style.background = 'rgba(79, 195, 247, 0.3)';
                ripple.style.transform = 'translate(-50%, -50%)';
                ripple.style.pointerEvents = 'none';
                ripple.style.zIndex = '1000';
                ripple.style.animation = 'rippleEffect 0.6s ease-out';
                document.body.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
            
            // Eventos táctiles mejorados específicamente para móviles
            document.body.addEventListener('touchstart', (e) => {
                // No prevenir por defecto aquí para mantener compatibilidad
                const touch = e.touches[0];
                launchSparks(touch.clientX, touch.clientY);
                
                // Haptic feedback en dispositivos compatibles
                if (navigator.vibrate && isMobile) {
                    navigator.vibrate(50);
                }
            }, { passive: true });
            
            document.body.addEventListener('touchend', (e) => {
                const touch = e.changedTouches[0];
                launchSparks(touch.clientX, touch.clientY);
                
                // Efecto de ondas para móviles
                const ripple = document.createElement('div');
                ripple.style.position = 'fixed';
                ripple.style.left = touch.clientX + 'px';
                ripple.style.top = touch.clientY + 'px';
                ripple.style.width = '10px';
                ripple.style.height = '10px';
                ripple.style.borderRadius = '50%';
                ripple.style.background = 'rgba(255, 64, 129, 0.3)';
                ripple.style.transform = 'translate(-50%, -50%)';
                ripple.style.pointerEvents = 'none';
                ripple.style.zIndex = '1000';
                ripple.style.animation = 'rippleEffect 0.6s ease-out';
                document.body.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            }, { passive: true });
              // Parallax suave en el scroll optimizado para móviles
            if (!isMobile) {
                window.addEventListener('scroll', () => {
                    const scrolled = window.pageYOffset;
                    const sparks = document.querySelectorAll('.spark');
                    sparks.forEach((spark, index) => {
                        const speed = (index % 3 + 1) * 0.1;
                        spark.style.transform = `translateY(${scrolled * speed}px)`;
                    });
                });
            } else {
                // Versión simplificada para móviles para mejor rendimiento
                window.addEventListener('scroll', () => {
                    const scrolled = window.pageYOffset;
                    if (scrolled % 10 === 0) { // Reducir frecuencia en móviles
                        const sparks = document.querySelectorAll('.spark');
                        sparks.forEach((spark, index) => {
                            const speed = (index % 2 + 1) * 0.05;
                            spark.style.transform = `translateY(${scrolled * speed}px)`;
                        });
                    }
                }, { passive: true });
            }
        });
        
        // Añadir el CSS para el efecto ripple
        const rippleStyle = document.createElement('style');
        rippleStyle.textContent = `
            @keyframes rippleEffect {
                0% {
                    width: 10px;
                    height: 10px;
                    opacity: 1;
                }
                100% {
                    width: 200px;
                    height: 200px;
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(rippleStyle);
        
        // Para iOS
        window.addEventListener('touchstart', () => {}, { once: true });
    </script>
</body>
</html>